package com;

import java.io.IOException;
import java.net.URL;
import java.net.HttpURLConnection;

public class PingAT {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		public static void main(String[] args) {
	        String targetUrl = "http://192.168.0.9:8081/Servlet/Ex06GetPost";
	        int numAccesses = 100; // 반복 횟수
	        String postData = "post=하하하"; // POST 데이터

	        try {
	            URL url = new URL(targetUrl);

	            // 사이트 접속
	            for (int i = 0; i < numAccesses; i++) {
	                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
	                connection.setRequestMethod("POST");
	                connection.setDoOutput(true);

	                // POST 데이터 전송
	                OutputStream outputStream = connection.getOutputStream();
	                byte[] postDataBytes = postData.getBytes("UTF-8");
	                outputStream.write(postDataBytes);
	                outputStream.flush();
	                outputStream.close();

	                int responseCode = connection.getResponseCode();
	                System.out.println("응답 코드: " + responseCode);
	                connection.disconnect();
	                System.out.println("사이트 접속: " + (i + 1));
	            }
	        } catch (IOException e) {
	            e.printStackTrace();
	        }
	}

}
